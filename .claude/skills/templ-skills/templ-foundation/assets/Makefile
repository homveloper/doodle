.PHONY: help install templ dev build test clean

help:
	@echo "Available commands:"
	@echo "  make install  - Install dependencies and tools"
	@echo "  make templ    - Generate Go files from .templ"
	@echo "  make dev      - Run development server with live reload"
	@echo "  make build    - Build for production"
	@echo "  make test     - Run tests"
	@echo "  make clean    - Clean build artifacts"

install:
	@echo "ğŸ“¦ Installing dependencies..."
	@go mod download
	@echo "ğŸ”§ Installing templ CLI..."
	@go install github.com/a-h/templ/cmd/templ@latest
	@echo "ğŸŒªï¸  Installing air (live reload)..."
	@go install github.com/cosmtrek/air@latest
	@echo "âœ… Installation complete!"

templ:
	@echo "ğŸ”„ Generating templ files..."
	@templ generate

dev:
	@echo "ğŸš€ Starting development server..."
	@air

build: templ
	@echo "ğŸ—ï¸  Building for production..."
	@go build -o dist/app .
	@echo "âœ… Build complete: dist/app"

test: templ
	@echo "ğŸ§ª Running tests..."
	@go test -v ./...

clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	@rm -rf tmp/ dist/
	@find . -name "*_templ.go" -delete
	@echo "âœ… Clean complete!"
