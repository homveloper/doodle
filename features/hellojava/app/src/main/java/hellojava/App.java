/*
 * This source file was generated by the Gradle 'init' task
 */
package hellojava;

import java.util.Set;
import java.util.TreeSet;
import java.util.HashSet;
import java.util.List;
import java.util.ArrayList;

public class App {
    public String getGreeting() {
        return "Hello World!";
    }

    public static void main(String[] args) {
        System.out.println("=== For Loopì™€ ì»¬ë ‰ì…˜ ìˆ˜ì • ì‹¤í—˜ ===\n");

        // 1. ArrayList - ìˆœíšŒ ì¤‘ ì¶”ê°€
        System.out.println("1. ArrayList - ìˆœíšŒ ì¤‘ ì¶”ê°€:");
        List<Integer> list = new ArrayList<>();
        list.add(1);
        list.add(2);
        list.add(3);

        try {
            for (Integer num : list) {
                System.out.println("í˜„ì¬: " + num);
                if (num == 2) {
                    list.add(99);  // ğŸ’¥ ConcurrentModificationException!
                }
            }
        } catch (Exception e) {
            System.out.println("âŒ ì˜ˆì™¸ ë°œìƒ: " + e.getClass().getSimpleName());
        }

        // 2. TreeSet - ìˆœíšŒ ì¤‘ ì¶”ê°€
        System.out.println("\n2. TreeSet - ìˆœíšŒ ì¤‘ ì¶”ê°€:");
        TreeSet<Integer> treeSet = new TreeSet<>();
        treeSet.add(1);
        treeSet.add(2);
        treeSet.add(3);

        try {
            for (Integer num : treeSet) {
                System.out.println("í˜„ì¬: " + num);
                if (num == 2) {
                    treeSet.add(99);  // ğŸ’¥ ConcurrentModificationException!
                }
            }
        } catch (Exception e) {
            System.out.println("âŒ ì˜ˆì™¸ ë°œìƒ: " + e.getClass().getSimpleName());
        }

        // 3. ì•ˆì „í•œ ë°©ë²• 1: ì¸ë±ìŠ¤ ê¸°ë°˜ for loop (Listë§Œ ê°€ëŠ¥)
        System.out.println("\n3. ì•ˆì „í•œ ë°©ë²• - ì¸ë±ìŠ¤ ê¸°ë°˜ for:");
        List<Integer> safeList = new ArrayList<>();
        safeList.add(1);
        safeList.add(2);
        safeList.add(3);

        for (int i = 0; i < safeList.size(); i++) {
            System.out.println("í˜„ì¬: " + safeList.get(i));
            if (safeList.get(i) == 2) {
                safeList.add(99);  // âœ… ì‘ë™! (í•˜ì§€ë§Œ ë¬´í•œë£¨í”„ ì£¼ì˜)
                break;  // ë¬´í•œë£¨í”„ ë°©ì§€
            }
        }
        System.out.println("ê²°ê³¼: " + safeList);

        // 4. ì•ˆì „í•œ ë°©ë²• 2: ì„ì‹œ ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©
        System.out.println("\n4. ì•ˆì „í•œ ë°©ë²• - ì„ì‹œ ë¦¬ìŠ¤íŠ¸:");
        TreeSet<Integer> originalSet = new TreeSet<>();
        originalSet.add(1);
        originalSet.add(2);
        originalSet.add(3);

        List<Integer> toAdd = new ArrayList<>();
        for (Integer num : originalSet) {
            System.out.println("í˜„ì¬: " + num);
            if (num == 2) {
                toAdd.add(99);
            }
        }
        originalSet.addAll(toAdd);
        System.out.println("ê²°ê³¼: " + originalSet);

        // 5. ì•ˆì „í•œ ë°©ë²• 3: Iterator ì‚¬ìš©
        System.out.println("\n5. ì•ˆì „í•œ ë°©ë²• - Iterator:");
        List<Integer> iterList = new ArrayList<>();
        iterList.add(1);
        iterList.add(2);
        iterList.add(3);

        java.util.Iterator<Integer> iterator = iterList.iterator();
        while (iterator.hasNext()) {
            Integer num = iterator.next();
            System.out.println("í˜„ì¬: " + num);
            if (num == 2) {
                iterator.remove();  // âœ… Iteratorë¥¼ í†µí•œ ì œê±°ëŠ” ì•ˆì „
            }
        }
        System.out.println("ê²°ê³¼: " + iterList);

        // 6. CopyOnWriteArrayList - ìˆœíšŒ ì¤‘ ìˆ˜ì • ê°€ëŠ¥
        System.out.println("\n6. CopyOnWriteArrayList - ìˆœíšŒ ì¤‘ ìˆ˜ì • ê°€ëŠ¥:");
        java.util.concurrent.CopyOnWriteArrayList<Integer> cowList =
            new java.util.concurrent.CopyOnWriteArrayList<>();
        cowList.add(1);
        cowList.add(2);
        cowList.add(3);

        for (Integer num : cowList) {
            System.out.println("í˜„ì¬: " + num);
            if (num == 2) {
                cowList.add(99);  // âœ… ì‘ë™! (í•˜ì§€ë§Œ ì´ë²ˆ ìˆœíšŒì—ëŠ” ì•ˆ ë³´ì„)
            }
        }
        System.out.println("ê²°ê³¼: " + cowList);

        System.out.println("\n=== ì‹¤í—˜ ì™„ë£Œ ===");
    }
}
